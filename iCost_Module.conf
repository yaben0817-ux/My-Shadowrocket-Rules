#!name=iCost AI 监控 (经典版)
#!desc=显示单次请求耗时与Token消耗，使用固定标题样式。
#!author=yaben0817-ux
#!homepage=https://github.com/yaben0817-ux/My-Shadowrocket-Rules
#!icon=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Bot.png

[MITM]
hostname = %APPEND% api.deepseek.com, api.siliconflow.cn, ark.cn-beijing.volces.com, openrouter.ai, api.moonshot.cn, generativelanguage.googleapis.com, api.openai.com, api.anthropic.com

[Script]
# ---------------------------------------------------
# 经典模式：固定标题 + 基础数据
# 链接已添加 ?v=title_fix 强制刷新缓存
# ---------------------------------------------------

# 1. 请求阶段
iCost_Classic_Req = type=http-request, pattern=^https?://(api\.deepseek\.com/chat/completions|api\.siliconflow\.cn/v1/chat/completions|ark\.cn-beijing\.volces\.com/api/v3/chat/completions|openrouter\.ai/api/v1/chat/completions|api\.moonshot\.cn/v1/chat/completions|generativelanguage\.googleapis\.com/v1beta/openai/chat/completions|api\.openai\.com/v1/chat/completions|api\.anthropic\.com/v1/messages), requires-body=true, max-size=3145728, script-path=https://raw.githubusercontent.com/yaben0817-ux/My-Shadowrocket-Rules/main/iCost_Stats.js?v=title_fix, timeout=60

# 2. 响应阶段
iCost_Classic_Res = type=http-response, pattern=^https?://(api\.deepseek\.com/chat/completions|api\.siliconflow\.cn/v1/chat/completions|ark\.cn-beijing\.volces\.com/api/v3/chat/completions|openrouter\.ai/api/v1/chat/completions|api\.moonshot\.cn/v1/chat/completions|generativelanguage\.googleapis\.com/v1beta/openai/chat/completions|api\.openai\.com/v1/chat/completions|api\.anthropic\.com/v1/messages), requires-body=true, max-size=3145728, script-path=https://raw.githubusercontent.com/yaben0817-ux/My-Shadowrocket-Rules/main/iCost_Stats.js?v=title_fix, timeout=60
